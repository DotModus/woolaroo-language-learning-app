<div class="loading-popup-container">
  <!-- Hidden debug info (only visible in dev when needed) -->
  <div class="debug-info">
    showDetailedInfo: {{showDetailedInfo}} |
    isCapturePage: {{isCapturePage}} |
    hasImage: {{!!capturedImage}}
  </div>

  <!-- Image Container - Only shown when processing an image -->
  <style>
    #imageContainerForDirectInjection {
      padding: 0;
      margin: 0 auto 20px;
      width: 216px;
      height: 286px;
      display: none;
      align-items: center;
      justify-content: center;
      border-radius: 16px;
      overflow: hidden;
    }

    @media (min-width: 768px) {
      #imageContainerForDirectInjection {
        width: 290px;
        height: 290px;
      }
    }
  </style>

  <!-- Image container - always present in DOM for direct manipulation -->
  <div id="imageContainerForDirectInjection" class="image-container">
    <!-- Image will be injected here by direct DOM manipulation -->
  </div>

  <!-- Detailed information section - only shown when there's a captured image -->
  <div [style.display]="capturedImage ? 'block' : 'none'" class="detailed-info">
    <h2 [innerHTML]="'Checking your picture...' | translate:'checkingYourPicture'"></h2>
    <p class="info-text" [innerHTML]="'Did you know that at least 40% of the 7,000 languages estimated to be spoken in the world are endangered?' | translate:'didYouKnow'"></p>
    <p class="region-info" [innerHTML]="'Explore an endangered language using your surroundings' | translate:'regionInfo'"></p>
  </div>

  <!-- Simple loading indicator - shown when there's no captured image -->
  <div [style.display]="!capturedImage ? 'block' : 'none'" class="loading-indicator">
    <h2 [innerHTML]="'Loading...' | translate:'loading'"></h2>
  </div>

  <!-- Spinner - always shown -->
  <div class="spinner-container">
    <app-busy-spinner></app-busy-spinner>
  </div>
</div>
