<div
	class="translation-container"
	[class.hidden]="!selectedWordVisible"
	*ngIf="selectedWord && displayTranslation?.translation"
>
	<div class="transliteration" *ngIf="displayTranslation?.transliteration">
		<span class="word">{{ displayTranslation?.transliteration }}</span>
		<span class="share">
			<button
				*ngIf="displayTranslation?.transliteration"
				(click)="onShareClick()"
			>
				<app-icon icon="share" shadow="true"></app-icon>
			</button>
		</span>
	</div>
	<div
		class="translation"
		*ngIf="displayTranslation?.translation !== displayTranslation?.transliteration"
	>
		<span class="translation_count">
			<span class="translation_count_container"
				>{{selectedWord.translations.length}}</span
			>
		</span>
		<span class="word">
			<select
				(change)="onTranslationSelectionChange($event.index, $event.target.value)"
			>
				@for(_trans of selectedWord.translations; track trackTrans) {
				<option value="{{_trans.translation}}">
					{{_trans.translation}}
				</option>
				}
			</select>
		</span>
		<span></span>
		<span class="share">
			<button
				*ngIf="!displayTranslation?.transliteration"
				(click)="onShareClick()"
			>
				<app-icon icon="share" shadow="true"></app-icon>
			</button>
		</span>
	</div>
	<button
		*ngIf="displayTranslation?.soundURL"
		class="play-audio"
		(click)="onPlayAudioClick()"
	>
		<app-icon
			icon="play_audio"
			shadow="true"
			*ngIf="audioState === audioStateValues.Stopped"
		></app-icon>
		<mat-progress-spinner
			[diameter]="45"
			mode="indeterminate"
			class="loading"
			*ngIf="audioState !== audioStateValues.Stopped"
		></mat-progress-spinner>
	</button>
	<audio
		#audioPlayer
		[src]="displayTranslation?.soundURL | gcsUrl"
		preload="none"
		(play)="onAudioPlaying()"
		(ended)="onAudioStopped()"
		(pause)="onAudioStopped()"
	></audio>
</div>

<div
	class="translation-not-found"
	[class.hidden]="!selectedWordVisible"
	*ngIf="selectedWord && !displayTranslation?.translation"
>
	<div class="message" (click)="onAddTranslationClick()">
		<app-icon icon="add" shadow="true"></app-icon>
		<span [innerHTML]="'Add word' | translate:'addWord'"></span>
	</div>
</div>
<app-selection-line
	[class.hidden]="!selectedWordVisible"
	[targetPosition]="lineTargetPosition"
></app-selection-line>
<app-word-scroll-list
	[translations]="translations"
	[defaultSelectedWordIndex]="defaultSelectedWordIndex"
	(selectedWordChanged)="onSelectedWordChanged($event)"
	(targetPositionChanged)="onTargetPositionChanged($event)"
>
</app-word-scroll-list>
