<!-- Translation heading above word list -->
<div class="translation-heading">
	<span [innerHTML]="'Here\'s what I see:' | translate: 'translationHeading'"></span>
</div>

<!-- Word scroll list component -->
<app-word-scroll-list [translations]="translations" [defaultSelectedWordIndex]="defaultSelectedWordIndex"
	(selectedWordChanged)="onSelectedWordChanged($event)" (targetPositionChanged)="onTargetPositionChanged($event)">
</app-word-scroll-list>

<!-- The main info section with fixed dimensions -->
<div class="info-section">
	<!-- Fixed height heading -->
	<div class="info-heading">
		<h2 *ngIf="!showSentence"><span [innerHTML]="'Translated into' | translate:'translatedInto'"></span> {{currentLanguage}}</h2>
		<h2 *ngIf="showSentence" [innerHTML]="'Gemini generated sentence' | translate:'geminiSentence'"></h2>
	</div>

	<!-- Audio element hidden -->
	<audio #audioPlayer [src]="displayTranslation?.soundURL | gcsUrl" preload="metadata" (play)="onAudioPlaying()"
		(ended)="onAudioStopped()" (pause)="onAudioStopped()"></audio>

	<!-- Fixed height word display -->
	<div class="word-display-section">
		<div class="icon-placeholder" *ngIf="!showSentence"
			 (click)="onShareClick()"
			 [class.disabled]="!displayTranslation?.translation">
			<app-icon icon="share_black"></app-icon>
		</div>
		<div class="word-container">
			<span class="selected-word" *ngIf="!showSentence">{{displayTranslation?.translation || 'Select a word'}}</span>
			<div class="selected-word sentence" *ngIf="showSentence">
				<span>{{ displayTranslation?.split_sentence[0] }}</span>
				<span class="highlight">{{ displayTranslation?.split_sentence[1] }}</span>
				<span>{{ displayTranslation?.split_sentence[2] }}</span>
			</div>
		</div>
		<div class="icon-placeholder" *ngIf="!showSentence"
		     (click)="onPlayAudioClick()"
		     [class.disabled]="!displayTranslation?.soundURL"
		     [ngClass]="{'no-audio': !displayTranslation?.soundURL}">
			<app-icon icon="audio_black"></app-icon>
		</div>
	</div>

	<!-- Fixed height word type -->
	@if (displayTranslation?.transliteration) {
		<div class="word-type-section">
			<span class="word-type">{{ displayTranslation?.transliteration}}</span>
		</div>
	}

	<!-- Fixed height details with context toggle inside -->
	<div class="info-details">
		@if (languageChangeService.loading$ | async) {
			<!-- Loading indicator -->
			<div class="context-toggle-section">
				<a class="context-toggle">
					<mat-spinner diameter="20"></mat-spinner>
					<span [innerHTML]="'Loading translations...' | translate:'loadingTranslations'"></span>
				</a>
			</div>
		} @else {
			<!-- Context toggle section -->
			<div class="context-toggle-section">
				<a class="context-toggle" (click)="toggleShowSentence()">

					@if (showSentence) {
						<span [innerHTML]="'Show word' | translate:'showWord'"></span>
					} @else {
						<span [innerHTML]="'Show in context' | translate:'showInContext'"></span>
					}
				</a>
			</div>
		}
	</div>
</div>

<!-- Toast notification for successful sharing -->
<div class="share-toast" [class.visible]="showShareToast">
  <div class="toast-content">
    <app-icon icon="check"></app-icon>
    <span>Word shared successfully!</span>
  </div>
</div>
