<mat-sidenav-container>
  <mat-sidenav (openedStart)="onSidenavOpenStart()" (closed)="onSidenavClosed()" mode="over" [opened]="sidenavOpen">
    <app-sidenav (menuClosed)="onSidenavClosed()"></app-sidenav>
  </mat-sidenav>
  <mat-sidenav-content>
    <app-toolbar>
      <button (click)="onOpenMenuClick()" class="open-menu" aria-label="Open Menu" slot="start">
        <app-icon icon="menu"></app-icon>
      </button>
    </app-toolbar>

    <div class="capture-layout">
      <!-- Top section: Instructions -->
      <div class="capture-section top-section">
        <div class="instruction-text" [innerHTML]="'Take a picture to discover<br>new words' | translate:'takeAPictureToDiscoverNewWords'"></div>
      </div>

      <!-- Middle section: Camera Preview -->
      <div class="capture-section middle-section">
        <!-- Use CSS grid to stack camera viewport and frame -->
        <div style="display: grid; place-items: center; width: 100%; height: 100%;">
          <!-- Camera preview container -->
          <div class="camera-preview-container" style="grid-area: 1/1;">
            <div class="camera-viewport">
              <app-camera-preview></app-camera-preview>
            </div>
          </div>
          <!-- Camera frame overlaid using grid -->
          <div class="camera-frame" style="grid-area: 1/1; z-index: 2;"></div>
        </div>
      </div>

      <!-- Bottom section: Action Buttons -->
      <div class="capture-section bottom-section">
        <div class="bottom-container">
          <div class="icon-container">
            <!-- Hidden file input for image selection -->
            <input type="file" #fileInput id="fileInput" accept="image/*" style="display: none;" (change)="onFileSelected($event)">

            <button class="load-photo-icon" (click)="fileInput.click()">
              <app-icon icon="photo_library"></app-icon>
            </button>
            <button class="capture-icon" (click)="onCaptureClick()">
              <app-icon icon="capture_photo"></app-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
